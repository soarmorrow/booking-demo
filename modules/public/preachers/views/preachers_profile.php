
<style type="text/css">
    .col-xs-1, .col-sm-1, .col-md-1, .col-lg-1, .col-xs-2, .col-sm-2, .col-md-2, .col-lg-2, .col-xs-3, .col-sm-3, .col-md-3, .col-lg-3, .col-xs-4, .col-sm-4, .col-md-4, .col-lg-4, .col-xs-5, .col-sm-5, .col-md-5, .col-lg-5, .col-xs-6, .col-sm-6, .col-md-6, .col-lg-6, .col-xs-7, .col-sm-7, .col-md-7, .col-lg-7, .col-xs-8, .col-sm-8, .col-md-8, .col-lg-8, .col-xs-9, .col-sm-9, .col-md-9, .col-lg-9, .col-xs-10, .col-sm-10, .col-md-10, .col-lg-10, .col-xs-11, .col-sm-11, .col-md-11, .col-lg-11, .col-xs-12, .col-sm-12, .col-md-12, .col-lg-12 {
        padding-right: 3px;
        padding-left: 3px;
    }
    .associated-centres .blue{
        padding: 10px;
        text-overflow:ellipsis; 
    }
</style>
<style type="text/css">
    @import url(http://weloveiconfonts.com/api/?family=entypo);
    .col-xs-1, .col-sm-1, .col-md-1, .col-lg-1, .col-xs-2, .col-sm-2, .col-md-2, .col-lg-2, .col-xs-3, .col-sm-3, .col-md-3, .col-lg-3, .col-xs-4, .col-sm-4, .col-md-4, .col-lg-4, .col-xs-5, .col-sm-5, .col-md-5, .col-lg-5, .col-xs-6, .col-sm-6, .col-md-6, .col-lg-6, .col-xs-7, .col-sm-7, .col-md-7, .col-lg-7, .col-xs-8, .col-sm-8, .col-md-8, .col-lg-8, .col-xs-9, .col-sm-9, .col-md-9, .col-lg-9, .col-xs-10, .col-sm-10, .col-md-10, .col-lg-10, .col-xs-11, .col-sm-11, .col-md-11, .col-lg-11, .col-xs-12, .col-sm-12, .col-md-12, .col-lg-12 {
        padding-right: 3px;
        padding-left: 3px;
    }
    .associated-centres .blue{
        padding-top: 10px;
        text-overflow:ellipsis; 
    }
    .img-description{
        border-top-right-radius: 5px;
    }
    .associated-centres{
        height: 350px;
    }
    h4.blue a{
        padding-left: 10px;
    }
    /* entypo */
    [class*="entypo-"]:before {
        font-family: 'entypo', sans-serif;
    }

    ::selection {
        background: transparent;
    }
    .showicons + .label{
        background:#7B7484;
        color:#231733;
    }

    .showicons ~ .social {
        opacity:1;
        -webkit-transform: scale(1) translateY(-48px) translateX(27px);
        -moz-transform:scale(1) translateY(-48px) translateX(27px);
        -o-transform:scale(1) translateY(-48px) translateX(27px);
        transform:scale(1) translateY(-48px) translateX(27px);
        -webkit-transition:.5s;
        -moz-transition:.5s;
        -o-transition:.5s;
        transition:.5s;
        position: absolute !important; 
        right: 50px;
    }
    .content {
        opacity:1;
        -webkit-transform: scale(1) translateY(-48px) translateX(27px);
        -moz-transform:scale(1) translateY(-48px) translateX(27px);
        -o-transform:scale(1) translateY(-48px) translateX(27px);
        transform:scale(1) translateY(-48px) translateX(27px);
        -webkit-transition:.5s;
        -moz-transition:.5s;
        -o-transition:.5s;
        transition:.5s;
        position: absolute !important; 
        right: 20px;
        top: 50px;
        display: block;
    }
    .label {
        font-size:16px;
        cursor:pointer;
        margin:0;
        padding:5px 10px;

        border-radius:10%;
        color:#7B7484;
    }

    .social {
        transform-origin:0% 0%;

        -webkit-transform: scale(0) translateY(-48px) translateX(27px);
        -moz-transform:scale(0) translateY(-48px) translateX(27px);
        -o-transform:scale(0) translateY(-48px) translateX(27px);
        transform:scale(0) translateY(-48px) translateX(27px);
        padding: 15px 20px 10px 10px;
        opacity:0;
    }
    .social ul {
        position:relative;
        left:0;
        right:0;
        margin:auto;
        color:#fff;
        height:46px;
        width:180px;
        background:#3B5998;
        padding:0;
        list-style:none;
    }
    .share{
        display: none;
    }
    .social ul li {
        font-size:20px;

        cursor:pointer;
        width:60px;
        margin:0;
        padding:12px 0;
        text-align:center;
        float:left;
        display:block;
        height:46px;}

    .social ul li:hover {color:rgba(0,0,0,.5);}

    .social ul:after {
        content:'';
        display:block;
        position:absolute;
        left:0;
        right:0;
        margin:35px auto;
        height:0;
        width:0;

        border-left: 20px solid transparent;
        border-right: 20px solid transparent;

        border-top: 20px solid #3B5998;
    }
    .social ul > li > a {
        color: #e5e5e5;
        display: block;
        transition: all 0.5s linear 1s;
    }

    li[class*="twitter"] {background:#6CDFEA;padding:12px 0;}
    li[class*="gplus"] {background:#E34429;padding:12px 0;}

    .filter-white .col-xs-1, .filter-white .col-sm-1, .filter-white .col-md-1, .filter-white .col-lg-1, .filter-white .col-xs-2, .filter-white .col-sm-2, .filter-white .col-md-2, .filter-white .col-lg-2, .filter-white .col-xs-4, .filter-white .col-sm-4, .filter-white .col-md-4, .filter-white .col-lg-4, .filter-white .col-xs-5, .filter-white .col-sm-5, .filter-white .col-md-5, .filter-white .col-lg-5, .filter-white .col-xs-6, .filter-white .col-sm-6, .filter-white .col-md-6, .filter-white .col-lg-6, .filter-white .col-xs-7, .filter-white .col-sm-7, .filter-white .col-md-7, .filter-white .col-lg-7, .filter-white .col-xs-8, .filter-white .col-sm-8, .filter-white .col-md-8, .filter-white .col-lg-8, .filter-white .col-xs-9, .filter-white .col-sm-9, .filter-white .col-md-9, .filter-white .col-lg-9, .filter-white .col-xs-10, .filter-white .col-sm-10, .filter-white .col-md-10, .filter-white .col-lg-10, .filter-white .col-xs-11, .filter-white .col-sm-11, .filter-white .col-md-11, .filter-white .col-lg-11, .filter-white .col-xs-12, .filter-white .col-sm-12, .filter-white .col-md-12, .filter-white .col-lg-12 {
        padding-right: 3px;
        padding-left: 1px;
    }
    .rating span{
        width: 0.8em !important;
        cursor: pointer;
    }
    .active a{
        color: #09f !important;
    }
    .centerDetails li a{
        color: #333;
    }
    .popular-centres .card-header {
        bottom: 0px;
        top:auto;
        padding: 0px 5px;
    }
    .img-thumbnail{
        padding: 0px!important;
    }
    .card{
        margin-bottom: 0 !important;
    }
    .card a, .card a:hover, .card a:focus {
        color: #F3F8F7;
    }
    .table tr td{
        border-top: 0 !important;
        border-bottom: 1px solid #ddd;
    }
    .rate > span {
        cursor: default !important;
    }
    .nomatch {
        background-color: #fff;
        /*padding: 30px 0 30px 0;*/
        border-radius: 5px;
        /*margin-top: 5px;*/
    }
    .card-image img{
        height: 200px !important;
    }
    @media (max-width: 767px) {
        .eventlist{
            padding: 0;
        }
        .associated-centres{
            height: auto;
            margin-top: 10px;
        }
        .card-image img{
            height: auto !important;
        }
    }
    .carousel-inner{
        overflow: visible;
    }
</style>


<!--./ Slider-->
<section class="">

    <div class="container pad-top-130">

        <div class="row">

            <div class="col-md-10 col-md-offset-1 col-sm-12">

                <div class="row">
                    <div class="col-md-3 col-sm-12 col-xs-12 ">
                        <div class="col-md-12 col-sm-12 col-xs-12  widget-item box-round" style="background-color: white;">
                            <ul class="top-left-menus" id="tab">
                                <li><a href="#" id="1" class="active">About the Preacher</a>
                                <li><a href="#" id="2">Program Schedule</a>
                                <li><a href="#" id="3">Free Resources</a>
                                <li><a href="#" id="4">Books Published</a>
                                <li><a href="#" id="5">On Social Media</a>
                            </ul>                                   
                        </div> 
                    </div>
                    <div class="col-md-9">
                        <div class="col-md-12 col-sm-12 col-xs-12 widget-item box-round" style="background-color: white;">
                            <div class="row">
                                <div class="col-md-12 col-xs-12">
                                    <div class="pull-right padding-right-20">
                                        <a href="" class="preacher_share"><i class="fa fa-share-alt head-blue">&nbsp;&nbsp;Share</i></a>
                                        <a href=""><i class="fa fa-check-circle-o head-blue" onclick="window.print()" >&nbsp;&nbsp;Print</i></a>
                                        <a href="#"><i class="fa fa-heart-o head-blue like"> <span id="likes"><?= $likes ?></span></i></a>
                                    </div>
                                </div>
                                <div id="content1" class="pull-right share">  
                                    <input type="checkbox"  class="checkbox hidden shareinput">
                                    <label for="share" class="label entypo-export"></label>
                                    <div class="social">
                                        <ul>
                                            <li class="twitter">
                                                <a href="https://twitter.com/share?url=<?= urlencode(current_url()) ?>&amp;via=goretreat&amp;related=retreat&amp;hashtags=goretreat&amp;text=<?= urlencode($meta->title) ?>"  target="_blank" class="entypo-twitter">&nbsp;</a>
                                            </li>
                                            <li class="facebook">
                                                <a href="https://www.facebook.com/dialog/share?app_id=<?= $this->facebook->getAppID() ?>&amp;display=popup&amp;href=<?= urlencode(current_url()) ?>&amp;redirect_uri=<?= urlencode(current_url()) ?>" target="_blank"  class="entypo-facebook">&nbsp;</a>
                                            </li>
                                            <li class="gplus">
                                                <a href="https://plus.google.com/share?url=<?= urlencode(current_url()) ?>" target="_blank" class="entypo-gplus">&nbsp;</a>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>

                            <div class="row" style="padding-left: 50px;">
                                <div class="col-md-3 col-sm-3 col-xs-12">
                                    <img src="<?= base_url($preacher->image) ?>" class="img-responsive profile-pic col-xs-offset-1">
                                </div>
                                <div class="col-md-9 col-xs-12 col-sm-9">
                                    <div class="profile-view">
                                        <div class="profile-name"><h4><?= $preacher->name ?></h4></div>
                                        <div class="profile-address"><h6><?= $preacher->address ?></h6></div>
                                    </div>

                                </div>
                            </div>

                            <hr class="profile-line">

                            <div class="row" style="min-height: 115px;padding-top: 30px;padding-bottom: 30px;">
                                <div class="col-md-10 col-md-offset-1 col-xs-10 col-xs-offset-1">
                                    <!-- <label class="head-blue text-centre">About the preacher</label> -->
                                    <p class="profile-details" id="content"><?= $preacher->description ?></p>
                                </div>
                            </div>                                    
                        </div>
                        <?php
                        if ($count != 0) {
                            ?>
                            <div class="col-md-12 col-sm-12 col-xs-12 widget-item box-round" >
                                <h4>Associated Centres</h4>
                            </div>
                            <?php
                        }
                        ?>


                        <div class="col-md-12 col-sm-12 col-xs-12 ">
                            <div class="row">
                                <?php
                                foreach ($associated_centres as $associated_centre) {
                                    ?><div class="col-sm-4 col-md-4 ">
                                        <div class="associated-centres">
                                            <div class="card">
                                                <div class="card-content">
                                                    <div class="card-image">
                                                        <div class="img-description"><?= $associated_centre->type_name ?></div>                                             
                                                        <img src="<?= base_url('themes/user/resources/assets/images/preachers/2.jpg') ?>" alt="Loading image...">

                                                    </div> 
                                                </div>
                                            </div>
                                            <h4 class="blue"><a href="<?= site_url('centre_public/events') ?>/<?= $associated_centre->id ?>"> <?= $associated_centre->name ?> </a></h4>
                                            <h5 class="blue"><?= $associated_centre->street_address1 ?>,<?= $associated_centre->city ?>,<?= $associated_centre->state ?></h5>
                                            <h6><?php
                                                echo substr($associated_centre->description, 0, 50);
                                                if (strlen($associated_centre->description) > 50) {
                                                    echo "...";
                                                }
                                                ?></h6>
                                        </div>
                                    </div> 
                                    <?php
                                }
                                ?>                            
                            </div>

                            <!-- <div class="row">
                                <div class="col-md-12 col-sm-12 col-xs-12">
                                    <div class="row">
                                        <div class="col-md-12">
                                            <div class="center-block">
                                                <a href="#!/showmore" class="show-more">Show More <img src="<?= base_url('themes/user/resources/assets/images/show_more.png') ?>" /></a><br />
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>   -->                                    
                        </div> 


                        <div class="col-md-12 col-sm-12 col-xs-12 bottom-container"

                    </div>
                </div>

            </div>
        </div>
    </div>
</div>
</div>
</section>
<div class="clearfix"></div><br>

<!--<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>-->                

<script>
    $(document).ready(function () {
        $("#tab li").click(function (e) {
            e.preventDefault();
//alert("Some Text Here");
            $("#tab a").removeClass("active");
            $(this).find('a').addClass('active');
            if ($(this).find('a').attr('id') == 1)
            {
                $("#content").html('<?= $preacher->description ?>');
            }
            else if ($(this).find('a').attr('id') == 2)
            {
                var url = "<?= site_url('preachers/getPschedule/' . $preacher->id) ?>";
                $.ajax({
                    url: url,
                    success: function (data) {
                        $("#content").html(data);
                    }
                });
            }
            else if ($(this).find('a').attr('id') == 3)
            {
                $("#content").html("Coming Soom");
            }
//$(this a).addClass("active");
        });
    });</script>


<script>

    // $(document).ready(function() {
    //     $(".filter").sticky({topSpacing: 63,className:"sticky-filter"});
    // });

    function loadMoreEvents() {
        $.post("<?= site_url('centre_public/getMoreEvents') ?>/<?= $id ?>", postdata, function (result) {
                    var resultdata = JSON.parse(result);
                    $("#eventslist").html(resultdata.data);
                    $(".search").html("Showing ");
                    if (choice_type != "undefined") {
                        $(".search").append(choice_type);
                    }
                    $(".search").append(" retreats ");
                    if (date != "undefined") {
                        $(".search").append("scheduled for " + date);
                    }
                });
            }

            $(document).ready(function () {
                $(document).on('click', '.loadmore', function (e) {
                    e.preventDefault();
                    var obj = $(this);
                    var url = obj.data('url');
                    var target = obj.data('target');
                    var centerpage = parseInt(obj.data('page'));
                    var type = $('input:radio[name=type]:checked').val();
                    var month = $('input:radio[name=month]:checked').val();
                    var postdata = {'type': type,
                        'month': month
                    };
                    obj.children('img').attr('src', THEME_PATH + '/resources/assets/images/loading.gif');
                    $.ajax({
                        url: url + '/' + centerpage,
                        type: 'POST',
                        data: postdata,
                        dataType: 'JSON',
                        success: function (data) {
                            if (data['status'] == false) {
                                obj.hide();
                            } else {
                                centerpage++;
                                obj.data("page", centerpage);
                            }
                            $('#' + target).append(data['data']);
                            obj.children('img').attr('src', THEME_PATH + '/resources/assets/images/show_more.png');
                        }
                    });
                });
            });

            $(document).ready(function () {
                $('.like').on('click', function (evt) {
                    evt.preventDefault();
                    var url = "<?= site_url('preachers/like') ?>/<?= $id ?>";
                                var that = $(this);
                                $.ajax({
                                    url: url,
                                    type: 'GET',
                                    success: function (data) {
                                        data = JSON.parse(data);
                                        if (data.code == 200) {
                                            swal("Success", data.message, "success");
                                            // update the like count on view page

                                            // get current like count
                                            var likes = that.find('span').text();
                                            likes = parseInt(likes) + 1; // add likes
                                            that.find('#likes').text(likes); // place like to the span inside clicked anchor tag
                                            $(".like i").removeClass('fa-heart-o').addClass('fa-heart');
                                        } else {
                                            swal("Oops!", data.message, "error");
                                        }
                                    },
                                    error: function (data) {
                                        console.log(data);
                                    }
                                });
                            });
                            $("#tab li").click(function (e) {
                                e.preventDefault();
                                //alert("Some Text Here");
                                $("#tab a").removeClass("active");
                                $(this).find('a').addClass('active');
                                if ($(this).find('a').attr('id') == 2)
                                {
                                    $("#eventslist").html("Coming... soon");
                                }
                                else if ($(this).find('a').attr('id') == 1)
                                {
                                    var url = "<?= site_url('preachers/getPschedule/' . $preacher->id) ?>";
                                    $.ajax({
                                        url: url,
                                        success: function (data) {
                                            $("#eventslist").html(data);
                                        }
                                    });
                                }
                                else if ($(this).find('a').attr('id') == 3)
                                {
                                    $("#eventslist").html("Coming Soon");
                                }
                                else if ($(this).find('a').attr('id') == 4)
                                {
                                    $("#eventslist").html("Coming Soon...");
                                }
                            });
                            $('.preacher_share').click(function (e) {
                                e.preventDefault();
                                var share_checkbox = $(document).find('.shareinput');
                                if (share_checkbox.hasClass('showicons')) {
                                    share_checkbox.removeClass('showicons');
                                    $("#content1").removeClass('content').addClass('share');
                                } else {
                                    share_checkbox.addClass('showicons');
                                    $("#content1").removeClass('share').addClass('content');
                                }
                            });
                            $('.like').on('click', function (evt) {
                                evt.preventDefault();
                                var url = "<?= site_url('preachers/like') ?>/<?= $id ?>";
                                            var that = $(this);
                                            $.ajax({
                                                url: url,
                                                type: 'GET',
                                                success: function (data) {
                                                    data = JSON.parse(data);
                                                    if (data.code == 200) {
                                                        swal("Success", data.message, "success");
                                                        // update the like count on view page

                                                        // get current like count
                                                        var likes = that.find('span').text();
                                                        likes = parseInt(likes) + 1; // add likes
                                                        that.find('#likes').text(likes); // place like to the span inside clicked anchor tag
                                                    } else {
                                                        swal("Oops!", data.message, "error");
                                                    }
                                                },
                                                error: function (data) {
                                                    console.log(data);
                                                }
                                            });
                                        });
                                    });
</script>
